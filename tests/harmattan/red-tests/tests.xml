<?xml version="1.0" encoding="ISO-8859-1"?>
<testdefinition version="0.1">

<!-- Test suite, name mandatory - the same as test package name -->
  <!-- Schema: https://projects.maemo.org/docs/testing/xml-definition.html -->
  <suite name="applauncherd-bug-tests" domain="Application framework"> 

    <set name="TC_Bug" description="functional tests for bugs and new features" feature="AF Basic Launcher daemon support" requirement="300168">   
      <pre_steps>
          <step>/usr/bin/waitloadavg.rb -l 1.0 -p 1.0 -t 120</step>
      </pre_steps>

      <!-- case name="applauncherd__test_dirPath_filePath_m" type="Functional" description="Test that correct file path and dir path is passed by booster m" timeout="360" level="System" insignificant="true">
          <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0  `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_dirPath_filePath_m</step>
      </case -->

      <!--case name="applauncherd__test_stress_boosted_apps" type="Functional" description="Stress test for boosted applications to check only one instance is running." timeout="360" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_stress_boosted_apps</step>
      </case-->
      <case name="applauncherd__test_daemon_help" type="Functional" description="Test the --help parameter for the daemon" timeout="360" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-daemons.py test_daemon_help</step>
      </case>
      <case name="applauncherd__test_daemon_no_display" type="Functional" description="Test that daemon cannot be started if the DISPLAY env variable is not set" timeout="360" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-daemons.py test_daemon_no_display</step>
      </case>
      <case name="applauncherd__test_daemon_debug" type="Functional" description="Test the --debug option for the daemon" timeout="360" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-daemons.py test_daemon_debug </step>
      </case>
      <case name="applauncherd__test_app_exits_clean" type="Functional" description="Test the application exits clean" timeout="360" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-daemons.py test_app_exits_clean</step>
      </case>

      <case name="applauncherd__test_launched_app_wm_class_m" type="Functional" description="Test that launched application have correct WM_CLASS Xproperty booster m" timeout="460" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_launched_app_wm_class_m</step>
      </case>

      <case name="applauncherd__test_launched_app_wm_class_d" type="Functional" description="Test that launched application have correct WM_CLASS Xproperty booster d" timeout="460" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_launched_app_wm_class_d</step>
      </case>

      <case name="applauncherd__test_launched_app_wm_class_e" type="Functional" description="Test that launched application have correct WM_CLASS Xproperty booster e" timeout="460" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_launched_app_wm_class_e</step>
      </case>

      <case name="applauncherd__test_launched_app_wm_class_q" type="Functional" description="Test that launched application have correct WM_CLASS Xproperty booster q" timeout="460" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_launched_app_wm_class_q</step>
      </case>

      <case name="applauncherd__test_q_booster_dont_have_GL_context" type="Functional" description="Test that q-booster don't have GL context" timeout="100" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_q_booster_dont_have_GL_context</step>
      </case>

      <case name="applauncherd__test_m_booster_dont_have_GL_context" type="Functional" description="Test that m-booster don't have GL context" timeout="100" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_m_booster_dont_have_GL_context</step>
      </case>

      <case name="applauncherd__test_e_booster_dont_have_GL_context" type="Functional" description="Test that e-booster don't have GL context" timeout="100" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_e_booster_dont_have_GL_context</step>
      </case>

      <case name="applauncherd__test_d_booster_dont_have_GL_context" type="Functional" description="Test that d-booster don't have GL context" timeout="100" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_d_booster_dont_have_GL_context</step>
      </case>

      <case name="applauncherd__test_detect_booster_m_leaks_file_descriptor" type="Functional" description="Test that booster-m doesn't leak file descriptors when invoker is used by calling application directly not by the d-Bus service" timeout="10" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_detect_booster_m_leaks_file_descriptor_when_invoker_is_using_app_directly</step>
      </case>

      <case name="applauncherd__test_detect_booster_d_leaks_file_descriptor" type="Functional" description="Test that booster-d doesn't leak file descriptors when invoker is used by calling application directly not by the d-Bus service" timeout="10" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_detect_booster_d_leaks_file_descriptor_when_invoker_is_using_app_directly</step>
      </case>

      <case name="applauncherd__test_detect_booster_q_leaks_file_descriptor" type="Functional" description="Test that booster-q doesn't leak file descriptors when invoker is used by calling application directly not by the d-Bus service" timeout="10" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_detect_booster_q_leaks_file_descriptor_when_invoker_is_using_app_directly</step>
      </case>

      <case name="applauncherd__test_detect_booster_e_leaks_file_descriptor" type="Functional" description="Test that booster-e doesn't leak file descriptors when invoker is used by calling application directly not by the d-Bus service" timeout="10" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_detect_booster_e_leaks_file_descriptor_when_invoker_is_using_app_directly</step>
      </case>

      <environments>
          <scratchbox>true</scratchbox>
          <hardware>true</hardware>    
      </environments>
    </set>

    <set name="TC_GLContext" description="functional tests for glcontext" feature="AF Basic Launcher daemon support" requirement="300168">   
      <pre_steps>
          <step>/usr/bin/waitloadavg.rb -l 1.0 -p 1.0 -t 120</step>
      </pre_steps>

      <case name="applauncherd__test_q_boosted_has_GL_context" type="Functional" description="Test that q-boosted app has GL context and q-booster doesn't have" timeout="100" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_q_boosted_has_glcontext</step>
      </case>

      <case name="applauncherd__test_m_boosted_has_GL_context" type="Functional" description="Test that m-boosted app has GL context and m-booster doesn't have" timeout="100" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_m_boosted_has_glcontext</step>
      </case>

      <case name="applauncherd__test_d_boosted_has_GL_context" type="Functional" description="Test that d-boosted app has GL context and d-booster doesn't have" timeout="100" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_d_boosted_has_glcontext</step>
      </case>

      <case name="applauncherd__test_e_boosted_has_GL_context" type="Functional" description="Test that e-boosted app has GL context and e-booster doesn't have" timeout="100" level="System" insignificant="true">
        <step expected_result="0">source /tmp/session_bus_address.user; DISPLAY=:0 `pyversions -d` /usr/share/applauncherd-testscripts/test-func-launcher.py test_e_boosted_has_glcontext</step>
      </case>

      <environments>
          <scratchbox>false</scratchbox>
          <hardware>true</hardware>    
      </environments>
    </set>

  </suite>
</testdefinition>


